async function exibirProdutos1(){
    const json = await fetch(`dados.json`);
    const prod = await json.json();
    console.log(prod);
  
    var desc = prod.Item1.descricao; var preco = prod.Item1.preco; var image = prod.Item1.img; var image1 = prod.Item1.img1; var image2 = prod.Item1.img2; var image3 = prod.Item1.img3; var image4 = prod.Item1.img4;
    localStorage.setItem("desc", desc); localStorage.setItem("preco", preco); localStorage.setItem("image", image); localStorage.setItem("image1", image1); localStorage.setItem("image2", image2); localStorage.setItem("image3", image3); localStorage.setItem("image4", image4);

  
    window.location.href = "produto.html";  
}

async function exibirProdutos2(){
    const json = await fetch(`dados.json`);
    const prod = await json.json();
    console.log(prod);
  
    var desc = prod.Item2.descricao; var preco = prod.Item2.preco; var image = prod.Item2.img; var image1 = prod.Item2.img1; var image2 = prod.Item2.img2; var image3 = prod.Item2.img3; var image4 = prod.Item2.img4;
    localStorage.setItem("desc", desc); localStorage.setItem("preco", preco); localStorage.setItem("image", image); localStorage.setItem("image1", image1); localStorage.setItem("image2", image2); localStorage.setItem("image3", image3); localStorage.setItem("image4", image4);

  
    window.location.href = "produto.html";  
}

async function exibirProdutos3(){
    const json = await fetch(`dados.json`);
    const prod = await json.json();
    console.log(prod);
  
    var desc = prod.Item3.descricao; var preco = prod.Item3.preco; var image = prod.Item3.img; var image1 = prod.Item3.img1; var image2 = prod.Item3.img2; var image3 = prod.Item3.img3; var image4 = prod.Item3.img4;
    localStorage.setItem("desc", desc); localStorage.setItem("preco", preco); localStorage.setItem("image", image); localStorage.setItem("image1", image1); localStorage.setItem("image2", image2); localStorage.setItem("image3", image3); localStorage.setItem("image4", image4);

  
    window.location.href = "produto.html";  
}

async function exibirProdutos4(){
    const json = await fetch(`dados.json`);
    const prod = await json.json();
    console.log(prod);
  
    var desc = prod.Item4.descricao; var preco = prod.Item4.preco; var image = prod.Item4.img; var image1 = prod.Item4.img1; var image2 = prod.Item4.img2; var image3 = prod.Item4.img3; var image4 = prod.Item4.img4;
    localStorage.setItem("desc", desc); localStorage.setItem("preco", preco); localStorage.setItem("image", image); localStorage.setItem("image1", image1); localStorage.setItem("image2", image2); localStorage.setItem("image3", image3); localStorage.setItem("image4", image4);

  
    window.location.href = "produto.html";  
}

async function exibirProdutos5(){
    const json = await fetch(`dados.json`);
    const prod = await json.json();
    console.log(prod);
  
    var desc = prod.Item5.descricao; var preco = prod.Item5.preco; var image = prod.Item5.img; var image1 = prod.Item5.img1; var image2 = prod.Item5.img2; var image3 = prod.Item5.img3; var image4 = prod.Item5.img4;
    localStorage.setItem("desc", desc); localStorage.setItem("preco", preco); localStorage.setItem("image", image); localStorage.setItem("image1", image1); localStorage.setItem("image2", image2); localStorage.setItem("image3", image3); localStorage.setItem("image4", image4);

  
    window.location.href = "produto.html";  
}

async function exibirProdutos6(){
    const json = await fetch(`dados.json`);
    const prod = await json.json();
    console.log(prod);
  
    var desc = prod.Item6.descricao; var preco = prod.Item6.preco; var image = prod.Item6.img; var image1 = prod.Item6.img1; var image2 = prod.Item6.img2; var image3 = prod.Item6.img3; var image4 = prod.Item6.img4;
    localStorage.setItem("desc", desc); localStorage.setItem("preco", preco); localStorage.setItem("image", image); localStorage.setItem("image1", image1); localStorage.setItem("image2", image2); localStorage.setItem("image3", image3); localStorage.setItem("image4", image4);

  
    window.location.href = "produto.html";  
}

async function exibirProdutos7(){
    const json = await fetch(`dados.json`);
    const prod = await json.json();
    console.log(prod);
  
    var desc = prod.Item7.descricao; var preco = prod.Item7.preco; var image = prod.Item7.img; var image1 = prod.Item7.img1; var image2 = prod.Item7.img2; var image3 = prod.Item7.img3; var image4 = prod.Item7.img4;
    localStorage.setItem("desc", desc); localStorage.setItem("preco", preco); localStorage.setItem("image", image); localStorage.setItem("image1", image1); localStorage.setItem("image2", image2); localStorage.setItem("image3", image3); localStorage.setItem("image4", image4);

  
    window.location.href = "produto.html";  
}

async function exibirProdutos8(){
    const json = await fetch(`dados.json`);
    const prod = await json.json();
    console.log(prod);
  
    var desc = prod.Item8.descricao; var preco = prod.Item8.preco; var image = prod.Item8.img; var image1 = prod.Item8.img1; var image2 = prod.Item8.img2; var image3 = prod.Item8.img3; var image4 = prod.Item8.img4;
    localStorage.setItem("desc", desc); localStorage.setItem("preco", preco); localStorage.setItem("image", image); localStorage.setItem("image1", image1); localStorage.setItem("image2", image2); localStorage.setItem("image3", image3); localStorage.setItem("image4", image4);

  
    window.location.href = "produto.html";  
}

async function exibirProdutos9(){
    const json = await fetch(`dados.json`);
    const prod = await json.json();
    console.log(prod);
  
    var desc = prod.Item9.descricao; var preco = prod.Item9.preco; var image = prod.Item9.img; var image1 = prod.Item9.img1; var image2 = prod.Item9.img2; var image3 = prod.Item9.img3; var image4 = prod.Item9.img4;
    localStorage.setItem("desc", desc); localStorage.setItem("preco", preco); localStorage.setItem("image", image); localStorage.setItem("image1", image1); localStorage.setItem("image2", image2); localStorage.setItem("image3", image3); localStorage.setItem("image4", image4);

  
    window.location.href = "produto.html";  
}

async function exibirProdutos10(){
    const json = await fetch(`dados.json`);
    const prod = await json.json();
    console.log(prod);
  
    var desc = prod.Item10.descricao; var preco = prod.Item10.preco; var image = prod.Item10.img; var image1 = prod.Item10.img1; var image2 = prod.Item10.img2; var image3 = prod.Item10.img3; var image4 = prod.Item10.img4;
    localStorage.setItem("desc", desc); localStorage.setItem("preco", preco); localStorage.setItem("image", image); localStorage.setItem("image1", image1); localStorage.setItem("image2", image2); localStorage.setItem("image3", image3); localStorage.setItem("image4", image4);

  
    window.location.href = "produto.html";  
}

var desc = localStorage.getItem("desc");
var preco = localStorage.getItem("preco");
document.getElementById("nome-produto").textContent = desc;
document.getElementById("precodol").textContent = `U$ ${preco}`;

var image = localStorage.getItem("image");
document.getElementById("imgpdt").src = image;
document.getElementById("imagem1").src = image;
var image1 = localStorage.getItem("image1");
document.getElementById("imagem2").src = image1
var image2 = localStorage.getItem("image2");
document.getElementById("imagem3").src = image2
var image3 = localStorage.getItem("image3");
document.getElementById("imagem4").src = image3
var image4 = localStorage.getItem("image4");
document.getElementById("imagem5").src = image4

// CONVERTER DOLAR EM REAL 
fetch (`https://economia.awesomeapi.com.br/json/last/USD-BRL`).then(resposta => {
    return resposta.json()
}).then(economia => {
    var dolar = economia.USDBRL.bid;
    dolar = parseFloat(dolar);

    const total = (preco * dolar);

    const total1 = parseFloat(total);

    var precoreal = document.getElementById("precoreal").textContent = `R$ ${total.toFixed(2).replace(".",",")}`;

    var personalizacao = 19.99;

    var nomeCamisa = document.getElementById("nomeCamisa");

    var numeroCamisa = document.getElementById("numeroCamisa");

    const total2 = total1 + personalizacao;
    // console.log(typeof total2);

    nomeCamisa.addEventListener("focusout", (evento) =>{
        addValorCamisa(evento.target.value);
    })
    
    function addValorCamisa(camisa,numeroCamisa){
        
        if(camisa == "" ){
            document.getElementById("precoreal").textContent = `R$ ${total.toFixed(2).replace(".",",")}`;
        }else{
            document.getElementById("precoreal").textContent = `R$ ${total2.toFixed(2).replace(".",",")}`
        }
    }

    numeroCamisa.addEventListener("focusout", (evento)=> {
        addValorCamisaNumero(evento.target.value);
    })

    function addValorCamisaNumero(camisaNumero){

        if(camisaNumero == ""){
            document.getElementById("precoreal").textContent = `R$ ${total.toFixed(2).replace(".",",")}`;
        }else{
            document.getElementById("precoreal").textContent = `R$ ${total2.toFixed(2).replace(".",",")}`
        }
    }
    
})

// INICIO DO FRETE
//preencher os inputs com arrow functions

const preencherFormulario = (endereco) => {
    document.getElementById("estado").value = endereco.uf;
    // document.getElementById("cidade").value = endereco.localidade;
}
//autopreenchimento   
const cepValido = (cep) => {
    if (cep.length == 8) {
        return true;
    } else {
        return false;
}
}
//buscar API
//Com async e await podemos trabalhar com código assíncrono em um estilo mais parecido com o bom e velho código síncrono.
const pesquisarCep = async () => {
    const cep = document.getElementById("cep").value;
    const url = `https://viacep.com.br/ws/${cep}/json/`;
    if (cepValido(cep)) {
        const dados = await fetch(url);
        // console.log("dados: " + dados);
        const endereco = await dados.json();
            preencherFormulario(endereco);
            // console.log("endereço: " + endereco)
    }

    // var ifi = document.getElementById('regiao').value;   
   
    //SWITCH VALOR DO FRETE
    var estado = document.getElementById('estado').value;
    var localidade = document.getElementById('cidade').value;
    console.log("estado" + estado);
    var tbody = document.getElementById('tbody')
    switch(estado){

        //NORTE
        case 'AM':
        case 'RR':
        case 'AP':
        case 'PA':
        case 'TO':
        case 'RO':
        case 'AC':
            console.log('região Norte')
            var regiao = `Região Norte`
            var frete = `100,00`
            console.log(frete);
                tbody.innerHTML =
                `                
                    <tr>
                        <th>Frete</th>
                        <th>Valor</th>
                    </tr>
                    <tr id="vitor">
                        <td id="regiao">${regiao}</td>
                        <td id="valorFrete">R$ ${frete}</td>           
                    </tr>
                `
            console.log(tbody);
        break;

        //NORDESTE
        case 'MA':
        case 'PI':
        case 'CE':
        case 'RN':
        case 'PE':
        case 'PB':
        case 'SE':
        case 'AL':
        case 'BA':
            console.log('regiao Nordeste');
            var regiao = `Região Nordeste`
            var frete = `80,00`
            tbody.innerHTML =
            `                
                <tr>
                    <th>Frete</th>
                    <th>Valor</th>
                </tr>
                <tr id="vitor">
                    <td id="regiao">${regiao}</td>
                    <td id="valorFrete">R$ ${frete}</td>           
                </tr>
            `
            console.log(tbody);
        break;
        
        //CENTRO-OESTE
        case 'MT':
        case 'MS':
        case 'GO':
        case 'DF':
            console.log('regiao Centro-Oeste');
            var regiao = `Região Centro-Oeste`
            var frete = `60,00`
            tbody.innerHTML =
            `                
                <tr>
                    <th>Frete</th>
                    <th>Valor</th>
                </tr>
                <tr id="vitor">
                    <td id="regiao">${regiao}</td>
                    <td id="valorFrete">R$ ${frete}</></td>       
                </tr>
                
            `
           
            console.log(tbody);
        break;

        //Sudeste
        case 'SP':
        case 'RJ':
        case 'ES':
        case 'MG':
        console.log('regiao Sudeste');
        var regiao = `Região Sudeste`
        var frete =  `Grátis`;
            tbody.innerHTML =
            `                
                <tr>
                    <th>Frete</th>
                    <th>Valor</th>
                </tr>
                <tr id="vitor">
                    <td id="regiao">${regiao}</td>
                    <td id="valorFrete">${frete}</td>                 
                </tr>
            `
        break;

        //SUL
        case 'PR':
        case 'RS':
        case 'SC':
            console.log('regiao Sul');
            var regiao = `Região Sul`
            var frete = `50,00`
            tbody.innerHTML =
            `                
                <tr>
                    <th>Frete</th>
                    <th>Valor</th>
                </tr>
                <tr id="vitor">
                    <td id="regiao">${regiao}</td>
                    <td id="valorFrete">R$ ${frete}</td>           
                </tr>
            `
            console.log(tbody);
        break;

        default:
            tbody.innerHTML = `<p id='cep1'>Insira um CEP Válido!</p>`
            console.log('CEP não encontrado!');
    }  
}
const botao = document.querySelector('#botao');
botao.addEventListener('click', pesquisarCep);



function calcularFretes() {

    var div = document.getElementById("tabela");

    if (div.style.display === "none") {
        div.style.display = "flex";
    }else{
        div.style.display = "flex"
    }
}
